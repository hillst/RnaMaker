{%  extends "HillCMSRnaMakerBundle:Default:bootstrap-template.html.twig" %}
{% block body %}
<div class="container">
	<div class="jumbotron" style="float:none">
		<h1 class="tool-header">Results </h1>
        {% if results['optimal'] is defined %}
            <h2>Optimal Results</h2>
            {% if results['optimal']|length == 0 %}
                <div class ="col-lg-12 amirna">No optimal results found.</div>
            {% endif %}
            {% for key, value in results['optimal'] %}
                <div class="amirna">
                <p><h3>{{ key }}</h3></p>
                {% for keyinfo, info in value %}
                    {% if keyinfo == 'TargetFinder' %}
                        <p><h3>TargetFinder</h3></p>
                        {% for tfkey, tfresult in value[keyinfo] %}
                           <h3>Hit: {{ tfkey }}</h3>
                           {% for hit in tfresult["hits"] %}
                                {% for hitk, hitv in hit %}
                                    <div class="col-lg-4"><strong>{{ hitk }}:</strong></div><div class="col-lg-8">{{hitv|raw}}</div>
                                {% endfor %}
                           {% endfor %}
                            <br/>
                        {% endfor %}
                    {% endif %}
                    {% if keyinfo != 'TargetFinder' %}
                        {# we are alternating 5' 3' #}
                        <div class="col-lg-2"><strong>{{keyinfo|raw}}:</strong></div>
                        <div class="col-lg-10">5' {{info|raw}} 3'</div>
                    {% endif %}
                {% endfor %}
                </div>
            {% endfor %}
        {%endif%}
        <h2>Sub-optimal Results</h2>
        {% if results['suboptimal'] is defined %}
            {% if results['suboptimal']|length == 0 %}
                <div class = "col-lg-12 amirna">No sub-optimal results found</div>
            {% endif %}
            {% for key, value in results['suboptimal'] %}
                <div class="amirna">
                <p><h3>{{ key }}</h3></p>
                {% for keyinfo, info in value %}
                    {% if keyinfo == 'TargetFinder' %}
                        <p><h3>TargetFinder</h3></p>
                        {% for tfkey, tfresult in value[keyinfo] %}
                           <h3>Hit: {{ tfkey }}</h3>
                           {% for hit in tfresult["hits"] %}
                                {% for hitk, hitv in hit %}
                                    <div class="col-lg-4">{{ hitk }}:</div><div class="col-lg-8">{{hitv|raw}}</div>
                                {% endfor %}
                           {% endfor %}
                            <br/>
                        {% endfor %}
                    {% endif %}
                    {% if keyinfo != 'TargetFinder' %}
                        {# we are alternating 5' 3' #}
                        <div class="col-lg-2"><strong>{{keyinfo|raw}}:</strong></div>
                        <div class="col-lg-10">5' {{info|raw}} 3'</div>
                    {% endif %}
                {% endfor %}
                </div>
            {% endfor %} 
        {% endif %}
        <a id = "download" class = "btn btn-default btn-block btn-amirna-primary" href="{{ asset(dl_token)}}" download>Download</a>
	</div>	
</div>
{% endblock %}
